"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[462],{47545:function(e,t,n){var a=n(43423);const{fleetConfig:o,mode:r}=window.viewerModel,i=new URLSearchParams(window.location.search),s=i.has("localPerformanceTool"),c=i.get("localPerformanceTool"),p=s?`http://localhost:${""===c?"3000":c}/`:"https://apps.wix.com/tb-performance-tool",d=(e,t)=>{window.addEventListener("message",(async n=>{"opened"===n.data&&e.postMessage({type:"performanceData",data:JSON.parse(JSON.stringify(t)),siteModels:await fetch(`${location.href.split("?")[0]}?dumpSiteModel=true`).then((e=>e.json()))},"*")}))};if(r.debug||"Canary"===o.type||window.location.search.includes("performanceTool=true")){const e=[];new PerformanceObserver((function(t){const n=t.getEntries();e.push(...n)})).observe({entryTypes:["longtask"]}),window.openPerformanceTool=async()=>{const t=await a.platformWorkerPromise,n=window.open(p,"_blank"),o=window.performance.getEntries(),r=e.map((e=>({duration:e.duration,startTime:e.startTime,entryType:e.entryType,name:`long task: ${e.attribution[0].containerId}, ${e.attribution[0].containerName}, ${e.attribution[0].containerSrc}`})));o.push(...r);const i=m();if(i.length>0){const e=window.performance.timing.connectStart,t=t=>t-e;o.push(...i.map((e=>JSON.parse(JSON.stringify({name:e.name,entryType:"SSR",startTime:t(e.startTime),duration:0})))))}t?(t.addEventListener("message",(e=>{var t;if("workerPerformanceData"===(null===(t=e.data)||void 0===t?void 0:t.type)){const t=e.data.data.performanceEntries,a=e.data.data.workerStartTime-window.performance.timeOrigin;t.forEach((e=>{e.startTime=e.startTime+a,e.worker="WORKER"})),o.push(...t),d(n,o)}})),t.postMessage({type:"PerformanceTool"})):d(n,o)}}const m=()=>{var e,t;const{ssrEvents:n}=JSON.parse((null===(e=document.getElementById("wix-warmup-data"))||void 0===e?void 0:e.textContent)||"{}"),a=JSON.parse((null===(t=document.getElementById("wix-head-performance-data"))||void 0===t?void 0:t.textContent)||"[]"),o=[];return a&&o.push(...a),n&&o.push(...n),o}}},function(e){e.O(0,[9448],(function(){return t=47545,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/openPerformanceTool.5be799bb.bundle.min.js.map